<!DOCTYPE html>
<html lang="zh-cn">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Language" content="zh-cn">
    <meta name="color-scheme" content="light dark">

    

    <meta name="author" content="OnlyHy">
    <meta name="description" content="表单验证 多维数组 date()数组 包含文件 文件处理 文件上传 Cookie Session 邮件 安全邮件 错误处理 异常处理 过滤 JSON  表单验证     当处理 HTML 表单时，PHP 能把来自 HTML 页面中的表单元素自动变成可供 PHP 脚本使用。
&lt;form method=&quot;post&quot; action=&quot;&lt;?php echo htmlspecialchars($_SERVER[&quot;PHP_SELF&quot;]);?&gt;&quot;&gt; //超级全局变量，返回当前正在执行脚本的文件名  htmlspecialchars()方法，htmlspecialchars() 函数把一些预定义的字符转换为 HTML 实体。能够避免$_SERVER[&ldquo;PHP_SELF&rdquo;] 被黑客利用，预定义的字符是：
&amp; （和号） 成为 &amp;
&quot; （双引号） 成为 &quot;
&#39; （单引号） 成为 &#39;
&lt; （小于） 成为 &lt; &gt;（大于） 成为 &gt;
执行脚本时，可通过$_SERVER[&ldquo;REQUEST_METHOD&rdquo;]来检测表单是否被提交。
必需字段    加入了一些新的变量: $nameErr, $emailErr, $genderErr, 和 $websiteErr.">
    <meta name="keywords" content="onlyhy">

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="关于PHP(2)"/>
<meta name="twitter:description" content="表单验证 多维数组 date()数组 包含文件 文件处理 文件上传 Cookie Session 邮件 安全邮件 错误处理 异常处理 过滤 JSON  表单验证     当处理 HTML 表单时，PHP 能把来自 HTML 页面中的表单元素自动变成可供 PHP 脚本使用。
&lt;form method=&quot;post&quot; action=&quot;&lt;?php echo htmlspecialchars($_SERVER[&quot;PHP_SELF&quot;]);?&gt;&quot;&gt; //超级全局变量，返回当前正在执行脚本的文件名  htmlspecialchars()方法，htmlspecialchars() 函数把一些预定义的字符转换为 HTML 实体。能够避免$_SERVER[&ldquo;PHP_SELF&rdquo;] 被黑客利用，预定义的字符是：
&amp; （和号） 成为 &amp;
&quot; （双引号） 成为 &quot;
&#39; （单引号） 成为 &#39;
&lt; （小于） 成为 &lt; &gt;（大于） 成为 &gt;
执行脚本时，可通过$_SERVER[&ldquo;REQUEST_METHOD&rdquo;]来检测表单是否被提交。
必需字段    加入了一些新的变量: $nameErr, $emailErr, $genderErr, 和 $websiteErr."/>

    <meta property="og:title" content="关于PHP(2)" />
<meta property="og:description" content="表单验证 多维数组 date()数组 包含文件 文件处理 文件上传 Cookie Session 邮件 安全邮件 错误处理 异常处理 过滤 JSON  表单验证     当处理 HTML 表单时，PHP 能把来自 HTML 页面中的表单元素自动变成可供 PHP 脚本使用。
&lt;form method=&quot;post&quot; action=&quot;&lt;?php echo htmlspecialchars($_SERVER[&quot;PHP_SELF&quot;]);?&gt;&quot;&gt; //超级全局变量，返回当前正在执行脚本的文件名  htmlspecialchars()方法，htmlspecialchars() 函数把一些预定义的字符转换为 HTML 实体。能够避免$_SERVER[&ldquo;PHP_SELF&rdquo;] 被黑客利用，预定义的字符是：
&amp; （和号） 成为 &amp;
&quot; （双引号） 成为 &quot;
&#39; （单引号） 成为 &#39;
&lt; （小于） 成为 &lt; &gt;（大于） 成为 &gt;
执行脚本时，可通过$_SERVER[&ldquo;REQUEST_METHOD&rdquo;]来检测表单是否被提交。
必需字段    加入了一些新的变量: $nameErr, $emailErr, $genderErr, 和 $websiteErr." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://onlyhy.github.io/posts/2017-06-13-php2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-06-13T00:00:00+00:00" />
<meta property="article:modified_time" content="2017-06-13T00:00:00+00:00" />



    <title>
  关于PHP(2) · oooonlyhy
</title>

    
      <link rel="canonical" href="http://onlyhy.github.io/posts/2017-06-13-php2/">
    

    <link rel="preload" href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as="font" type="font/woff2" crossorigin>

    
      
      
      <link rel="stylesheet" href="/css/coder.min.d9fddbffe6f27e69985dc5fe0471cdb0e57fbf4775714bc3d847accb08f4a1f6.css" integrity="sha256-2f3b/&#43;byfmmYXcX&#43;BHHNsOV/v0d1cUvD2Eesywj0ofY=" crossorigin="anonymous" media="screen" />
    

    

    

    

    

    <link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">

    <link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

    <meta name="generator" content="Hugo 0.91.0" />
  </head>

  
  
  <body class="preload-transitions colorscheme-light">
    

    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="/">
      oooonlyhy
    </a>
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link" href="/">首页</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="/posts/">归档</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="/categories/">分类</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="/about/">关于我</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="http://onlyhy.github.io/posts/2017-06-13-php2/">
              关于PHP(2)
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa fa-calendar" aria-hidden="true"></i>
              <time datetime='2017-06-13T00:00:00Z'>
                June 13, 2017
              </time>
            </span>
            <span class="reading-time">
              <i class="fa fa-clock-o" aria-hidden="true"></i>
              阅读时间：6 分钟
            </span>
          </div>
          <div class="authors">
    <i class="fa fa-user" aria-hidden="true"></i>
      <a href="/authors/onlyhy/">onlyhy</a></div>
          <div class="categories">
  <i class="fa fa-folder" aria-hidden="true"></i>
    <a href="/categories/php/">PHP</a></div>

          
        </div>
      </header>

      <div>
        
        <ul>
    <li><a href="#id">表单验证</a></li>
    <li><a href="#dw">多维数组</a></li>
    <li><a href="#da">date()数组</a></li>
    <li><a href="#bh">包含文件</a></li>
    <li><a href="#wj">文件处理</a></li>
    <li><a href="#wjs">文件上传</a></li>
    <li><a href="#cookie">Cookie</a></li>
    <li><a href="#session">Session</a></li>
    <li><a href="#dz">邮件</a></li>
    <li><a href="#aq">安全邮件</a></li>
    <li><a href="#error">错误处理</a></li>
    <li><a href="#yc">异常处理</a></li>
    <li><a href="#gl">过滤</a></li>
    <li><a href="#JSON">JSON</a></li>
</ul>
<h3 id="span-idbd表单验证-span">
  <span id="bd">表单验证 </span>
  <a class="heading-link" href="#span-idbd%e8%a1%a8%e5%8d%95%e9%aa%8c%e8%af%81-span">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h3>
<p>当处理 HTML 表单时，PHP 能把来自 HTML 页面中的表单元素自动变成可供 PHP 脚本使用。</p>
<pre><code>&lt;form method=&quot;post&quot; action=&quot;&lt;?php echo htmlspecialchars($_SERVER[&quot;PHP_SELF&quot;]);?&gt;&quot;&gt;  //超级全局变量，返回当前正在执行脚本的文件名  
</code></pre>
<p>htmlspecialchars()方法，htmlspecialchars() 函数把一些预定义的字符转换为 HTML 实体。能够避免$_SERVER[&ldquo;PHP_SELF&rdquo;] 被黑客利用，预定义的字符是：<br>
&amp; （和号） 成为 &amp;<br>
&quot; （双引号） 成为 &quot;<br>
' （单引号） 成为 '<br>
&lt; （小于） 成为 &lt;  &gt;（大于） 成为 &gt;</p>
<p>执行脚本时，可通过$_SERVER[&ldquo;REQUEST_METHOD&rdquo;]来检测表单是否被提交。</p>
<h4 id="必需字段">
  必需字段
  <a class="heading-link" href="#%e5%bf%85%e9%9c%80%e5%ad%97%e6%ae%b5">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<p>加入了一些新的变量: $nameErr, $emailErr, $genderErr, 和 $websiteErr.。这些错误变量将显示在必需字段上。 为每个$_POST变量增加了一个if else语句。 这些语句将检查 $_POST 变量是 否为空（使用php的 empty() 函数）。如果为空，将显示对应的错误信息。 如果不为空，数据将传递给test_input() 函数。</p>
<pre><code>&lt;?php
// 定义变量并默认设为空值
$nameErr = $emailErr = $genderErr = $websiteErr = &quot;&quot;;
$name = $email = $gender = $comment = $website = &quot;&quot;;

if ($_SERVER[&quot;REQUEST_METHOD&quot;] == &quot;POST&quot;) {
  if (empty($_POST[&quot;name&quot;])) {
    $nameErr = &quot;名字是必需的。&quot;;
  } else {
    $name = test_input($_POST[&quot;name&quot;]);
  }
  ...
}
?&gt;
</code></pre>
<p>在HTML实例中，为字段添加显示错误信息的脚本。</p>
<pre><code>&lt;form method=&quot;post&quot; action=&quot;&lt;?php echo htmlspecialchars($_SERVER[&quot;PHP_SELF&quot;]);?&gt;&quot;&gt; 
名字: &lt;input type=&quot;text&quot; name=&quot;name&quot;&gt;
&lt;span class=&quot;error&quot;&gt;* &lt;?php echo $nameErr;?&gt;&lt;/span&gt;
&lt;br&gt;&lt;br&gt;
&lt;/form&gt;  
</code></pre>
<h4 id="验证名称">
  验证名称
  <a class="heading-link" href="#%e9%aa%8c%e8%af%81%e5%90%8d%e7%a7%b0">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<p>preg_match — 进行正则表达式匹配，int preg_match ( string $pattern , string $subject [, array $matches [, int $flags ]] ) ，在 subject 字符串中搜索与 pattern 给出的正则表达式相匹配的内容。如果提供了 matches ，则其会被搜索的结果所填充。$matches[0] 将包含与整个模式匹配的文本，$matches[1] 将包含与第一个捕获的括号中的子模式所匹配的文本，以此类推。</p>
<pre><code>$name = test_input($_POST[&quot;name&quot;]);
if (!preg_match(&quot;/^[a-zA-Z ]*$/&quot;,$name)) {
  $nameErr = &quot;只允许字母和空格&quot;; 
}  
</code></pre>
<h4 id="验证邮件">
  验证邮件
  <a class="heading-link" href="#%e9%aa%8c%e8%af%81%e9%82%ae%e4%bb%b6">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<pre><code> $email = test_input($_POST[&quot;email&quot;]);
if (!preg_match(&quot;/([\w\-]+\@[\w\-]+\.[\w\-]+)/&quot;,$email)) {
  $emailErr = &quot;非法邮箱格式&quot;; 
}
</code></pre>
<h4 id="验证url">
  验证URL
  <a class="heading-link" href="#%e9%aa%8c%e8%af%81url">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<pre><code>$website = test_input($_POST[&quot;website&quot;]);
if (!preg_match(&quot;/\b(?:(?:https?|ftp):\/\/|www\.)[-a-z0-9+&amp;@#\/%?=~_|!:,.;]*[-a-z0-9+&amp;@#\/%=~_|]/i&quot;,$website)) {
  $websiteErr = &quot;非法的 URL 的地址&quot;; 
}
</code></pre>
<h4 id="_get-变量">
  $_GET 变量
  <a class="heading-link" href="#_get-%e5%8f%98%e9%87%8f">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<p>收集来自method=&ldquo;get&quot;的表单中的值，从带有 GET 方法的表单发送的信息，对任何人都是可见的（会显示在浏览器的地址栏），因此在发送密码或其他敏感信息时，不应该使用这个方法，并且对发送信息的量也有限制。</p>
<pre><code>&lt;form action=&quot;welcome.php&quot; method=&quot;get&quot;&gt;
名字: &lt;input type=&quot;text&quot; name=&quot;fname&quot;&gt;
年龄: &lt;input type=&quot;text&quot; name=&quot;age&quot;&gt;
&lt;input type=&quot;submit&quot; value=&quot;提交&quot;&gt;
&lt;/form&gt;  
</code></pre>
<p>&ldquo;welcome.php&rdquo; 文件现在可以通过 $_GET 变量来收集表单数据了，表单域的名称会自动成为$_GET数组中的键</p>
<pre><code>欢迎 &lt;?php echo $_GET[&quot;fname&quot;]; ?&gt;!&lt;br&gt;
你的年龄是 &lt;?php echo $_GET[&quot;age&quot;]; ?&gt;  岁。  
</code></pre>
<h4 id="_post-变量">
  $_POST 变量
  <a class="heading-link" href="#_post-%e5%8f%98%e9%87%8f">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<p>收集来自method=&ldquo;post&quot;的表单中的值,任何人都是不可见的，对发送信息的量也没有限制，默认情况下为8MB，由于变量不显示在 URL 中，所以无法把页面加入书签。</p>
<h4 id="_request-变量">
  $_REQUEST 变量
  <a class="heading-link" href="#_request-%e5%8f%98%e9%87%8f">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<p>包含了 $_GET、$_POST 和 $_COOKIE 的内容，可用来收集通过 GET 和 POST 方法发送的表单数据。</p>
<pre><code>欢迎 &lt;?php echo $_REQUEST[&quot;fname&quot;]; ?&gt;!&lt;br&gt;
你的年龄是 &lt;?php echo $_REQUEST[&quot;age&quot;]; ?&gt;  岁。  
</code></pre>
<h3 id="span-iddwspan多维数组">
  <span id="dw"></span>多维数组
  <a class="heading-link" href="#span-iddwspan%e5%a4%9a%e7%bb%b4%e6%95%b0%e7%bb%84">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h3>
<pre><code>&lt;?php 
$sites = array 
( 
    &quot;runoob&quot;=&gt;array 
    ( 
        &quot;菜鸟教程&quot;, 
        &quot;http://www.runoob.com&quot; 
    ), 
    &quot;google&quot;=&gt;array 
    ( 
        &quot;Google 搜索&quot;, 
        &quot;http://www.google.com&quot; 
    ), 
    &quot;taobao&quot;=&gt;array 
    ( 
        &quot;淘宝&quot;, 
        &quot;http://www.taobao.com&quot; 
    ) 
); 
print(&quot;&lt;pre&gt;&quot;); // 格式化输出数组 
print_r($sites); 
print(&quot;&lt;/pre&gt;&quot;); 
?&gt;
</code></pre>
<h3 id="span-iddadate函数span">
  <span id="da">date()函数</span>
  <a class="heading-link" href="#span-iddadate%e5%87%bd%e6%95%b0span">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h3>
<p>用于格式化时间/日期，可把时间戳格式化为可读性更好的日期和时间。</p>
<pre><code>string date ( string $format [, int $timestamp ] )  
</code></pre>
<p>format规定时间戳的格式，如d：月中的天(01-31)，m：月(01-12)，Y：年(四位数)，如<code>echo date(&quot;Y-m-d&quot;);</code>,timestamp规定时间戳，默认是当前的日期和时间。<br>
<a href="http://www.runoob.com/php/php-ref-date.html">查看所有日期函数看这里</a></p>
<h3 id="span-idbh包含文件-span">
  <span id="bh">包含文件 </span>
  <a class="heading-link" href="#span-idbh%e5%8c%85%e5%90%ab%e6%96%87%e4%bb%b6-span">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h3>
<p>include 和 require 语句用于在执行流中插入写在其他文件中的有用的代码，两个语句除了处理错误的方式不同，其他方面都是相同的。<br>
require 生成一个致命错误（E_COMPILE_ERROR），在错误发生后脚本会停止执行<br>
include 生成一个警告（E_WARNING），在错误发生后脚本会继续执行。 <br>
假设有一个标准的页头文件，名为 &ldquo;header.php&rdquo;。在页面中引用这个页头文件。</p>
<pre><code>&lt;body&gt;
&lt;?php include 'header.php'; ?&gt;
&lt;h1&gt;欢迎来到我的主页!&lt;/h1&gt;
&lt;p&gt;一些文本。&lt;/p&gt;
&lt;/body&gt;
</code></pre>
<h3 id="span-idwj文件处理span">
  <span id="wj">文件处理</span>
  <a class="heading-link" href="#span-idwj%e6%96%87%e4%bb%b6%e5%a4%84%e7%90%86span">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h3>
<h4 id="打开文件fopen">
  打开文件fopen()
  <a class="heading-link" href="#%e6%89%93%e5%bc%80%e6%96%87%e4%bb%b6fopen">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<pre><code>&lt;?php
$file=fopen(&quot;welcome.txt&quot;,&quot;r&quot;) or exit(&quot;Unable to open file!&quot;);//无法打开指定文件会返回0（false）
?&gt;
</code></pre>
<table>
<tr>
<td>模式</td>
<td>描述</td>
   </tr>
   <tr>
   <td>r</td>
<td> 只读。在文件的开头开始。</td></tr>
   <tr><td>r+</td>
<td>读/写。在文件的开头开始。</td></tr>
   <tr><td>w</td>
<td>只写。打开并清空文件的内容；如果文件不存在，则创建新文件。</td></tr>
   <tr><td>w+</td>
<td>读/写。打开并清空文件的内容；如果文件不存在，则创建新文件。</td></tr>
   <tr><td>a</td>
<td>追加。打开并向文件末尾进行写操作，如果文件不存在，则创建新文件。</td></tr>
   <tr><td>a+</td>
<td>读/追加。通过向文件末尾写内容，来保持文件内容。</td></tr>
   <tr><td>x</td>
<td>只写。创建新文件。如果文件已存在，则返回 FALSE 和一个错误。</td></tr>
   <tr><td>x+</td>
<td>读/写。创建新文件。如果文件已存在，则返回 FALSE 和一个错误。</td></tr>
</table>
<h4 id="关闭文件fclose">
  关闭文件fclose()
  <a class="heading-link" href="#%e5%85%b3%e9%97%ad%e6%96%87%e4%bb%b6fclose">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<pre><code>&lt;?php
$file = fopen(&quot;test.txt&quot;,&quot;r&quot;);
//执行一些代码
fclose($file);
?&gt;  
</code></pre>
<h4 id="检测文件末尾-feof">
  检测文件末尾 feof()
  <a class="heading-link" href="#%e6%a3%80%e6%b5%8b%e6%96%87%e4%bb%b6%e6%9c%ab%e5%b0%be-feof">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<pre><code>  if (feof($file)) echo &quot;文件结尾&quot;; //在 w 、a 和 x 模式下，您无法读取打开的文件  
</code></pre>
<h4 id="逐行读取文件-fgets">
  逐行读取文件 fgets()
  <a class="heading-link" href="#%e9%80%90%e8%a1%8c%e8%af%bb%e5%8f%96%e6%96%87%e4%bb%b6-fgets">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<h4 id="逐字符读取文件-fgetc">
  逐字符读取文件 fgetc()
  <a class="heading-link" href="#%e9%80%90%e5%ad%97%e7%ac%a6%e8%af%bb%e5%8f%96%e6%96%87%e4%bb%b6-fgetc">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<pre><code>&lt;?php
$file = fopen(&quot;welcome.txt&quot;, &quot;r&quot;) or exit(&quot;无法打开文件!&quot;);
// 读取文件每一行，直到文件结尾
while(!feof($file))
{
    echo fgets($file). &quot;&lt;br&gt;&quot;;
    echo fgetc($file);
}
fclose($file);
?&gt;
</code></pre>
<h4 id="手册">
  手册
  <a class="heading-link" href="#%e6%89%8b%e5%86%8c">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<p><a href="http://www.runoob.com/php/php-ref-filesystem.html">文件手册详</a></p>
<h3 id="span-idwjs文件上传span">
  <span id="wjs">文件上传</span>
  <a class="heading-link" href="#span-idwjs%e6%96%87%e4%bb%b6%e4%b8%8a%e4%bc%a0span">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h3>
<p>项目中包括文件上传的目录、表单文件、php上传代码</p>
<h4 id="创建一个文件上传表单">
  创建一个文件上传表单
  <a class="heading-link" href="#%e5%88%9b%e5%bb%ba%e4%b8%80%e4%b8%aa%e6%96%87%e4%bb%b6%e4%b8%8a%e4%bc%a0%e8%a1%a8%e5%8d%95">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<pre><code>&lt;form action=&quot;upload_file.php&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
&lt;label for=&quot;file&quot;&gt;文件名：&lt;/label&gt;  //enctype 属性规定了在提交表单时要使用哪种内容类型。在表单需要二进制数据时，比如文件内容，使用 &quot;multipart/form-data&quot;
&lt;input type=&quot;file&quot; name=&quot;file&quot; id=&quot;file&quot;&gt;&lt;br&gt; // type=&quot;file&quot; 属性规定了应该把输入作为文件来处理
&lt;input type=&quot;submit&quot; name=&quot;submit&quot; value=&quot;提交&quot;&gt;
&lt;/form&gt;  
</code></pre>
<h4 id="创建上传脚本">
  创建上传脚本
  <a class="heading-link" href="#%e5%88%9b%e5%bb%ba%e4%b8%8a%e4%bc%a0%e8%84%9a%e6%9c%ac">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<pre><code>if ($_FILES[&quot;file&quot;][&quot;error&quot;] &gt; 0)
{
    echo &quot;错误：&quot; . $_FILES[&quot;file&quot;][&quot;error&quot;] . &quot;&lt;br&gt;&quot;;
}
else
{
    echo &quot;上传文件名: &quot; . $_FILES[&quot;file&quot;][&quot;name&quot;] . &quot;&lt;br&gt;&quot;;
    echo &quot;文件类型: &quot; . $_FILES[&quot;file&quot;][&quot;type&quot;] . &quot;&lt;br&gt;&quot;;
    echo &quot;文件大小: &quot; . ($_FILES[&quot;file&quot;][&quot;size&quot;] / 1024) . &quot; kB&lt;br&gt;&quot;;
    echo &quot;文件临时存储的位置: &quot; . $_FILES[&quot;file&quot;][&quot;tmp_name&quot;];
}  
</code></pre>
<p>使用 PHP 的全局数组 $_FILES，第二个下标可以是 &ldquo;name&rdquo;、&ldquo;type&rdquo;、&ldquo;size&rdquo;、&ldquo;tmp_name&rdquo; 或 &ldquo;error&rdquo;。</p>
<h4 id="上传限制">
  上传限制
  <a class="heading-link" href="#%e4%b8%8a%e4%bc%a0%e9%99%90%e5%88%b6">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<pre><code>// 允许上传的图片后缀
$allowedExts = array(&quot;gif&quot;, &quot;jpeg&quot;, &quot;jpg&quot;, &quot;png&quot;);
$temp = explode(&quot;.&quot;, $_FILES[&quot;file&quot;][&quot;name&quot;]);
$extension = end($temp);        // 获取文件后缀名
if ((($_FILES[&quot;file&quot;][&quot;type&quot;] == &quot;image/gif&quot;)
|| ($_FILES[&quot;file&quot;][&quot;type&quot;] == &quot;image/jpeg&quot;)
|| ($_FILES[&quot;file&quot;][&quot;type&quot;] == &quot;image/jpg&quot;)
|| ($_FILES[&quot;file&quot;][&quot;type&quot;] == &quot;image/pjpeg&quot;)
|| ($_FILES[&quot;file&quot;][&quot;type&quot;] == &quot;image/x-png&quot;)
|| ($_FILES[&quot;file&quot;][&quot;type&quot;] == &quot;image/png&quot;))
&amp;&amp; ($_FILES[&quot;file&quot;][&quot;size&quot;] &lt; 204800)    // 小于 200 kb
&amp;&amp; in_array($extension, $allowedExts))
{//上传脚本}  
else
{
    echo &quot;非法的文件格式&quot;;
}  
</code></pre>
<h4 id="保存被上传的文件">
  保存被上传的文件
  <a class="heading-link" href="#%e4%bf%9d%e5%ad%98%e8%a2%ab%e4%b8%8a%e4%bc%a0%e7%9a%84%e6%96%87%e4%bb%b6">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<pre><code> // 判断当期目录下的 upload 目录是否存在该文件
    // 如果没有 upload 目录，你需要创建它，upload 目录权限为 777
    if (file_exists(&quot;upload/&quot; . $_FILES[&quot;file&quot;][&quot;name&quot;]))
    {
        echo $_FILES[&quot;file&quot;][&quot;name&quot;] . &quot; 文件已经存在。 &quot;;
    }
    else
    {
        // 如果 upload 目录不存在该文件则将文件上传到 upload 目录下
        move_uploaded_file($_FILES[&quot;file&quot;][&quot;tmp_name&quot;], &quot;upload/&quot; . $_FILES[&quot;file&quot;][&quot;name&quot;]);
        echo &quot;文件存储在: &quot; . &quot;upload/&quot; . $_FILES[&quot;file&quot;][&quot;name&quot;];
    }  
</code></pre>
<h3 id="span-idcookiecookie-span">
  <span id="cookie">Cookie </span>
  <a class="heading-link" href="#span-idcookiecookie-span">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h3>
<p>常用于识别用户，当同一台计算机通过浏览器请求页面时，这台计算机将会发送 cookie。</p>
<h4 id="创建cookie">
  创建Cookie
  <a class="heading-link" href="#%e5%88%9b%e5%bb%bacookie">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<p>setcookie() 函数必须位于 <html> 标签之前,</p>
<pre><code>setcookie(name, value, expire, path, domain);  
</code></pre>
<p>在发送 cookie 时，cookie 的值会自动进行 URL 编码，在取回时进行自动解码,为防止 URL 编码，使用 setrawcookie() 取而代之。</p>
<h4 id="取回cookie的值">
  取回Cookie的值
  <a class="heading-link" href="#%e5%8f%96%e5%9b%9ecookie%e7%9a%84%e5%80%bc">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<p>$_COOKIE 变量用于取回 cookie 的值<br>
用 isset() 函数来确认是否已设置了 cookie：</p>
<pre><code>&lt;?php
if (isset($_COOKIE[&quot;user&quot;]))
    echo &quot;欢迎 &quot; . $_COOKIE[&quot;user&quot;] . &quot;!&lt;br&gt;&quot;;
else
    echo &quot;普通访客!&lt;br&gt;&quot;;
?&gt;  
</code></pre>
<h4 id="删除cookie">
  删除Cookie
  <a class="heading-link" href="#%e5%88%a0%e9%99%a4cookie">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<p>使过期日期变更为过去的时间点</p>
<pre><code>   &lt;?php
// 设置 cookie 过期时间为过去 1 小时
setcookie(&quot;user&quot;, &quot;&quot;, time()-3600);
?&gt; 
</code></pre>
<p>如果浏览器不支持Cookie，使用其他办法，如通过表单传递数据。</p>
<pre><code>欢迎 &lt;?php echo $_POST[&quot;name&quot;]; ?&gt;.&lt;br&gt;
你 &lt;?php echo $_POST[&quot;age&quot;]; ?&gt; 岁了。  
</code></pre>
<h3 id="span-idsession-sessionspan">
  <span id="session"> Session</span>
  <a class="heading-link" href="#span-idsession-sessionspan">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h3>
<p>session 变量用于存储关于用户会话（session）的信息，或者更改用户会话（session）的设置,存储单一用户的信息，并且对于应用程序中的所有页面都是可用的。<br>
工作机制：为每个访客创建一个唯一的 id (UID)，并基于这个 UID 来存储变量，UID 存储在 cookie 中，或者通过 URL 进行传导。</p>
<h4 id="开始session">
  开始Session
  <a class="heading-link" href="#%e5%bc%80%e5%a7%8bsession">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<p>把用户信息存储到 PHP session 中之前，首先必须启动会话，session_start() 函数必须位于 <html> 标签之前。</p>
<pre><code>&lt;?php session_start(); ?&gt;
&lt;html&gt;  
</code></pre>
<h4 id="存储session变量">
  存储Session变量
  <a class="heading-link" href="#%e5%ad%98%e5%82%a8session%e5%8f%98%e9%87%8f">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<p>使用 PHP $_SESSION 变量，下面例子设置views变量</p>
<pre><code>&lt;?php
session_start();
if(isset($_SESSION['views']))
{
    $_SESSION['views']=$_SESSION['views']+1;
}
else
{
    $_SESSION['views']=1;
}
echo &quot;浏览量：&quot;. $_SESSION['views'];
?&gt;  
</code></pre>
<h4 id="销毁session">
  销毁Session
  <a class="heading-link" href="#%e9%94%80%e6%af%81session">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<p>使用 unset() 或 session_destroy() 函数,unset() 函数用于释放指定的 session 变量,session_destroy() 将重置 session，您将失去所有已存储的 session 数据。</p>
<pre><code>&lt;?php
session_start();
if(isset($_SESSION['views']))
{
    unset($_SESSION['views']);
}
?&gt;  
&lt;?php
session_destroy();
?&gt;  
</code></pre>
<h3 id="span-iddz邮件span">
  <span id="dz">邮件</span>
  <a class="heading-link" href="#span-iddz%e9%82%ae%e4%bb%b6span">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h3>
<p>运行邮件函数需要一个已安装且正在运行的邮件系统(如：sendmail、postfix、qmail等)，所用的程序通过在 php.ini 文件中的配置设置进行定义，mail()函数从脚本中发送电子邮件：<br>
<code>mail(to,subject,message,headers,parameters)</code></p>
<table>
    <tr>
        <td>参数</td>
        <td>描述</td>
    </tr>
    <tr>  <td>to</td>
        <td>    必需。规定 email 接收者。</td></tr>
    <tr>  <td>subject</td>
        <td>必需。规定 email 的主题。注释：该参数不能包含任何新行字符。</td></tr>
    <tr>  <td>message</td>
        <td>必需。定义要发送的消息。应使用 LF (\n) 来分隔各行。每行应该限制在 70 个字符内。</td></tr>
    <tr>  <td>headers</td>
        <td>可选。规定附加的标题，比如 From、Cc 和 Bcc。应当使用 CRLF (\r\n) 分隔附加的标题。</td></tr>
    <tr>  <td>parameters</td>
        <td>可选。对邮件发送程序规定额外的参数。</td></tr>
</table>
<h4 id="简易e-mail">
  简易E-Mail
  <a class="heading-link" href="#%e7%ae%80%e6%98%93e-mail">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<pre><code>&lt;?php
$to = &quot;someone@example.com&quot;;         // 邮件接收者
$subject = &quot;参数邮件&quot;;                // 邮件标题
$message = &quot;Hello! 这是邮件的内容。&quot;;  // 邮件正文
$from = &quot;someonelse@example.com&quot;;   // 邮件发送者
$headers = &quot;From:&quot; . $from;         // 头部信息设置
mail($to,$subject,$message,$headers);
echo &quot;邮件已发送&quot;;
?&gt;  
</code></pre>
<h4 id="mail表单">
  Mail表单
  <a class="heading-link" href="#mail%e8%a1%a8%e5%8d%95">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<pre><code>&lt;?php
if (isset($_REQUEST['email'])) { // 如果接收到邮箱参数则发送邮件
    // 发送邮件
    $email = $_REQUEST['email'] ;
    $subject = $_REQUEST['subject'] ;
    $message = $_REQUEST['message'] ;
    mail(&quot;someone@example.com&quot;, $subject,
    $message, &quot;From:&quot; . $email);
    echo &quot;邮件发送成功&quot;;
} else { // 如果没有邮箱参数则显示表单
    echo &quot;&lt;form method='post' action='mailform.php'&gt;
    Email: &lt;input name='email' type='text'&gt;&lt;br&gt;
    Subject: &lt;input name='subject' type='text'&gt;&lt;br&gt;
    Message:&lt;br&gt;
    &lt;textarea name='message' rows='15' cols='40'&gt;
    &lt;/textarea&gt;&lt;br&gt;
    &lt;input type='submit'&gt;
    &lt;/form&gt;&quot;;
}
?&gt;
</code></pre>
<p><a href="http://www.runoob.com/php/php-ref-mail.html">Mail参考手册</a></p>
<h3 id="span-idaq安全邮件span">
  <span id="aq">安全邮件</span>
  <a class="heading-link" href="#span-idaq%e5%ae%89%e5%85%a8%e9%82%ae%e4%bb%b6span">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h3>
<h4 id="防止e-mail注入">
  防止E-mail注入
  <a class="heading-link" href="#%e9%98%b2%e6%ad%a2e-mail%e6%b3%a8%e5%85%a5">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<p>最好的方法是对输入进行验证，使用过滤器来验证。</p>
<ul>
<li>FILTER_SANITIZE_EMAIL 过滤器从字符串中删除电子邮件的非法字符</li>
<li>FILTER_VALIDATE_EMAIL 过滤器验证电子邮件地址的值<br>
<a href="http://www.runoob.com/php/php-filter.html">更多过滤器</a></li>
</ul>
<h3 id="span-iderror错误处理span">
  <span id="error">错误处理</span>
  <a class="heading-link" href="#span-iderror%e9%94%99%e8%af%af%e5%a4%84%e7%90%86span">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h3>
<p>一条错误消息会被发送到浏览器，这条消息带有文件名、行号以及描述错误的消息。<br>
错误处理方法：</p>
<ol>
<li>简单的&quot;die()&ldquo;语句</li>
<li>自定义错误和错误触发器</li>
<li>错误报告</li>
</ol>
<h4 id="使用die函数">
  使用die()函数
  <a class="heading-link" href="#%e4%bd%bf%e7%94%a8die%e5%87%bd%e6%95%b0">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<pre><code>&lt;?php
if(!file_exists(&quot;welcome.txt&quot;))
{
    die(&quot;文件不存在&quot;);
}
else
{
    $file=fopen(&quot;welcome.txt&quot;,&quot;r&quot;);
}
?&gt;
</code></pre>
<h4 id="创建自定义错误处理器">
  创建自定义错误处理器
  <a class="heading-link" href="#%e5%88%9b%e5%bb%ba%e8%87%aa%e5%ae%9a%e4%b9%89%e9%94%99%e8%af%af%e5%a4%84%e7%90%86%e5%99%a8">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<p>一个专用函数，在发生错误时调用该函数。至少两个参数 (error level 和 error message)，最多五个参数（可选的：file, line-number 和 error context）<br>
error_function(error_level,error_message,
error_file,error_line,error_context)</p>
<h4 id="设置错误处理程序">
  设置错误处理程序
  <a class="heading-link" href="#%e8%ae%be%e7%bd%ae%e9%94%99%e8%af%af%e5%a4%84%e7%90%86%e7%a8%8b%e5%ba%8f">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<h4 id="触发错误">
  触发错误
  <a class="heading-link" href="#%e8%a7%a6%e5%8f%91%e9%94%99%e8%af%af">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<p>trigger_error()函数完成，可在任何位置触发错误，添加第二个参数能规定触发的错误级别。</p>
<pre><code>&lt;?php
// 错误处理函数
function customError($errno, $errstr)
{
    echo &quot;&lt;b&gt;Error:&lt;/b&gt; [$errno] $errstr&lt;br&gt;&quot;;
    echo &quot;脚本结束&quot;;
    die();
}

// 设置错误处理函数
set_error_handler(&quot;customError&quot;,E_USER_WARNING);

// 触发错误
$test=2;
if ($test&gt;1)
{
    trigger_error(&quot;变量值必须小于等于 1&quot;,E_USER_WARNING);
}
?&gt;  
</code></pre>
<h4 id="错误记录">
  错误记录
  <a class="heading-link" href="#%e9%94%99%e8%af%af%e8%ae%b0%e5%bd%95">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<p>默认的情况下，根据在 php.ini 中的 error_log 配置，PHP 向服务器的记录系统或文件发送错误记录，通过使用 error_log() 函数，可以向指定的文件或远程目的地发送错误记录。<br>
通过电子邮件向自己发送错误消息，是一种获得指定错误的通知的好办法</p>
<p>####通过电子邮件发送错误消息</p>
<pre><code>function customError($errno, $errstr)
{
    echo &quot;&lt;b&gt;Error:&lt;/b&gt; [$errno] $errstr&lt;br&gt;&quot;;
    echo &quot;已通知网站管理员&quot;;
    error_log(&quot;Error: [$errno] $errstr&quot;,1,
    &quot;someone@example.com&quot;,&quot;From: webmaster@example.com&quot;);
}  
</code></pre>
<h3 id="span-idyc异常处理span">
  <span id="yc">异常处理</span>
  <a class="heading-link" href="#span-idyc%e5%bc%82%e5%b8%b8%e5%a4%84%e7%90%86span">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h3>
<p>在指定的错误发生时改变脚本的正常流程，异常应该仅仅在错误情况下使用，而不应该用于在一个指定的点跳转到代码的另一个位置。</p>
<h4 id="基本使用">
  基本使用
  <a class="heading-link" href="#%e5%9f%ba%e6%9c%ac%e4%bd%bf%e7%94%a8">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<p>当异常被抛出时，其后的代码不会继续执行，PHP 会尝试查找匹配的 &ldquo;catch&rdquo; 代码块。<br>
处理异常代码应包括：</p>
<ol>
<li>Try - 使用异常的函数应该位于 &ldquo;try&rdquo; 代码块内。如果没有触发异常，则代码将照常继续执行。但是如果异常被触发，会抛出一个异常。</li>
<li>Throw - 里规定如何触发异常。每一个 &ldquo;throw&rdquo; 必须对应至少一个 &ldquo;catch&rdquo;。</li>
<li>Catch - &ldquo;catch&rdquo; 代码块会捕获异常，并创建一个包含异常信息的对象。</li>
</ol>
<h4 id="创建自定义exception类">
  创建自定义Exception类
  <a class="heading-link" href="#%e5%88%9b%e5%bb%ba%e8%87%aa%e5%ae%9a%e4%b9%89exception%e7%b1%bb">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<p>自定义的类必须是exception类的一个扩展，继承了exception类，可以使用它的方法，如getLine(),getFile(),getMessage()</p>
<h4 id="多个异常">
  多个异常
  <a class="heading-link" href="#%e5%a4%9a%e4%b8%aa%e5%bc%82%e5%b8%b8">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<p>可使用多个if..else代码块或switch或嵌套多个 ，使用多个catch可以捕获不同种类的异常。</p>
<h4 id="重新抛出异常">
  重新抛出异常
  <a class="heading-link" href="#%e9%87%8d%e6%96%b0%e6%8a%9b%e5%87%ba%e5%bc%82%e5%b8%b8">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<p>当异常被抛出时，您也许希望以不同于标准的方式对它进行处理。可以在一个 &ldquo;catch&rdquo; 代码块中再次抛出异常。</p>
<h4 id="设置顶层异常处理器">
  设置顶层异常处理器
  <a class="heading-link" href="#%e8%ae%be%e7%bd%ae%e9%a1%b6%e5%b1%82%e5%bc%82%e5%b8%b8%e5%a4%84%e7%90%86%e5%99%a8">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<p>set_exception_handler() 函数可设置处理所有未捕获异常的用户定义函数</p>
<h4 id="如果抛出了异常就必须捕获">
  如果抛出了异常，就必须捕获！
  <a class="heading-link" href="#%e5%a6%82%e6%9e%9c%e6%8a%9b%e5%87%ba%e4%ba%86%e5%bc%82%e5%b8%b8%e5%b0%b1%e5%bf%85%e9%a1%bb%e6%8d%95%e8%8e%b7">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<h3 id="span-idgl过滤器span">
  <span id="gl">过滤器</span>
  <a class="heading-link" href="#span-idgl%e8%bf%87%e6%bb%a4%e5%99%a8span">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h3>
<p>应该始终对外部数据进行过滤，外部数据指：来自表单的输入数据，Cookies, Web services data,服务器变量,数据库查询结果。</p>
<h4 id="过滤器函数">
  过滤器函数
  <a class="heading-link" href="#%e8%bf%87%e6%bb%a4%e5%99%a8%e5%87%bd%e6%95%b0">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<ol>
<li>filter_var() - 通过一个指定的过滤器来过滤单一的变量</li>
<li>filter_var_array() - 通过相同的或不同的过滤器来过滤多个变量</li>
<li>filter_input - 获取一个输入变量，并对它进行过滤</li>
<li>filter_input_array - 获取多个输入变量，并通过相同的或不同的过滤器对它们进行过滤</li>
</ol>
<p><a href="http://www.runoob.com/php/php-ref-filter.html">PHP Filter参考手册</a></p>
<h4 id="validating-和-sanitizing">
  Validating 和 Sanitizing
  <a class="heading-link" href="#validating-%e5%92%8c-sanitizing">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<p>Validating过滤器：</p>
<ol>
<li>用于验证用户输入</li>
<li>严格的格式规则（比如 URL 或 E-Mail 验证）</li>
<li>如果成功则返回预期的类型，如果失败则返回 FALSE</li>
</ol>
<p>Sanitizing 过滤器：</p>
<ol>
<li>用于允许或禁止字符串中指定的字符</li>
<li>无数据格式规则</li>
<li>始终返回字符串</li>
</ol>
<h4 id="选项和标志">
  选项和标志
  <a class="heading-link" href="#%e9%80%89%e9%a1%b9%e5%92%8c%e6%a0%87%e5%bf%97">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<p>用于向指定的过滤器添加额外的过滤选项。</p>
<pre><code>&lt;?php
$var=300;
$int_options = array(
    &quot;options&quot;=&gt;array
    (
        &quot;min_range&quot;=&gt;0,
        &quot;max_range&quot;=&gt;256
    )
    //选项必须放入一个名为 &quot;options&quot; 的相关数组中,如果使用标志，则不需在数组内
);
if(!filter_var($var, FILTER_VALIDATE_INT, $int_options))
{
    echo(&quot;不是一个合法的整数&quot;);
}
else
{
    echo(&quot;是个合法的整数&quot;);
}
?&gt;  
</code></pre>
<h4 id="过滤多个输入">
  过滤多个输入
  <a class="heading-link" href="#%e8%bf%87%e6%bb%a4%e5%a4%9a%e4%b8%aa%e8%be%93%e5%85%a5">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<p>使用 filter_var_array 或 the filter_input_array 函数。</p>
<pre><code>&lt;?php
$filters = array
(
    &quot;name&quot; =&gt; array
    (
        &quot;filter&quot;=&gt;FILTER_SANITIZE_STRING
    ),
    &quot;age&quot; =&gt; array
    (
        &quot;filter&quot;=&gt;FILTER_VALIDATE_INT,
        &quot;options&quot;=&gt;array
        (
            &quot;min_range&quot;=&gt;1,
            &quot;max_range&quot;=&gt;120
        )
    ),
    &quot;email&quot;=&gt; FILTER_VALIDATE_EMAIL
);
$result = filter_input_array(INPUT_GET, $filters);
 
if (!$result[&quot;age&quot;])
{
    echo(&quot;年龄必须在 1 到 120 之间。&lt;br&gt;&quot;);
}
elseif(!$result[&quot;email&quot;])
{
    echo(&quot;E-Mail 不合法&lt;br&gt;&quot;);
}
else
{
    echo(&quot;输入正确&quot;);
}
?&gt;
</code></pre>
<h4 id="filter_callback-过滤器">
  FILTER_CALLBACK 过滤器
  <a class="heading-link" href="#filter_callback-%e8%bf%87%e6%bb%a4%e5%99%a8">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<p>可以调用自定义的函数，把它作为一个过滤器来使用，在关联数组中，带有名称 &ldquo;options&rdquo;，如下将所有 &ldquo;_&rdquo; 转换为 &ldquo;.&quot;。</p>
<pre><code>&lt;?php
function convertSpace($string)
{
    return str_replace(&quot;_&quot;, &quot;.&quot;, $string);
}
 
$string = &quot;www_runoob_com!&quot;;
 
echo filter_var($string, FILTER_CALLBACK,
array(&quot;options&quot;=&gt;&quot;convertSpace&quot;));
?&gt;
</code></pre>
<h3 id="span-idjsonjsonspan">
  <span id="JSON">JSON</span>
  <a class="heading-link" href="#span-idjsonjsonspan">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h3>
<table>
    <tr><td>函数</td><td>描述</td></tr>
    <tr><td>json_encode</td><td> 对变量进行 JSON 编码</td></tr>
    <tr><td>json_decode</td><td>对 JSON 格式的字符串进行解码，转换为 PHP 变量</td></tr>
    <tr><td>json_last_error</td><td>返回最后发生的错误</td></tr>
</table>
<h4 id="json_encode">
  json_encode()
  <a class="heading-link" href="#json_encode">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<p>json_encode() 用于对变量进行 JSON 编码，该函数如果执行成功返回 JSON 数据，否则返回 FALSE，只对UTF-8编码的数据有效。</p>
<pre><code>string json_encode ( $value [, $options = 0 ] )  
</code></pre>
<h4 id="json_decode">
  json_decode()
  <a class="heading-link" href="#json_decode">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<p>json_decode() 函数用于对 JSON 格式的字符串进行解码，并转换为 PHP 变量。</p>
<pre><code>mixed json_decode ($json [,$assoc = false [, $depth = 512 [, $options = 0 ]]])  
</code></pre>
<p>assoc: 当该参数为 TRUE 时，将返回数组，FALSE 时返回对象，depth: 整数类型的参数，它指定递归深度，options: 二进制掩码，目前只支持 JSON_BIGINT_AS_STRING。</p>
<p><a href="http://www.runoob.com/php/php7-new-features.html">PHP7新特性</a></p>

      </div>


      <footer>
        


        
        
        
      </footer>
    </article>

    
  </section>

      </div>

      <footer class="footer">
  <section class="container">
    ©
    
      2017 -
    
    2021
     OnlyHy 
    ·
    技术支持 <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.
    
  </section>
</footer>

    </main>

    
      
      <script src="/js/coder.min.03b17769f4f91ae35667e1f2a1ca8c16f50562576cf90ff32b3179926914daa5.js" integrity="sha256-A7F3afT5GuNWZ&#43;HyocqMFvUFYlds&#43;Q/zKzF5kmkU2qU="></script>
    

    

    

    

    

    

    

    

    
  </body>

</html>
